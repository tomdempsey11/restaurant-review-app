<%- include('partials/header', { title: 'Contact', user }) %>

<section class="container container--narrow page-section">
  <h1 class="mb-4 m-0">Contact</h1>

  <% if (typeof flash !== 'undefined') { %>
    <% (flash('success') || []).forEach(msg => { %>
      <div class="alert alert--success mb-4" role="alert"><%= msg %></div>
    <% }) %>
  <% } %>

  <% if (errors && errors.length) { %>
    <div class="alert alert--error mb-4" role="alert">
      <ul class="list-unstyled m-0">
        <% errors.forEach(e => { %>
          <li><%= e.msg %></li>
        <% }) %>
      </ul>
    </div>
  <% } %>

  <form action="/api/contact" method="POST" class="card form-grid">
    <div class="form-row form-row--2">
      <label for="name">
        Name <span class="required">*</span>
        <input id="name" class="input" name="name" value="<%= values?.name || '' %>" required>
      </label>

      <label for="email">
        Email <span class="required">*</span>
        <input id="email" class="input" type="email" name="email" value="<%= values?.email || '' %>" required>
      </label>
    </div>

    <div class="form-row">
      <label for="subject">
        Subject <span class="required">*</span>
        <input id="subject" class="input" name="subject" value="<%= values?.subject || '' %>" required maxlength="140">
      </label>
    </div>

    <div class="form-row">
      <label for="message">
        Message <span class="required">*</span>
        <textarea id="message" class="input" name="message" rows="6" required><%= values?.message || '' %></textarea>
      </label>
      <p class="help-text">Please include links or examples if relevant.</p>
    </div>

    <div class="row-between gap-2">
      <button class="btn btn--primary" type="submit">Send</button>
      <span id="contactMsg" class="muted"></span>
    </div>
  </form>
</section>

<%- include('partials/footer') %>
