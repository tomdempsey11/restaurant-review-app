<%- include('../../partials/header', { title: (mode === 'create' ? 'New' : 'Edit') + ' Restaurant' }) %>

<section class="container container--narrow page-section">
  <h2 class="m-0 mb-4"><%= mode === 'create' ? 'Create Restaurant' : 'Edit Restaurant' %></h2>

  <% if (typeof error !== 'undefined' && error) { %>
    <div class="alert alert--error mb-4" role="alert"><%= error %></div>
  <% } %>

  <% const r = restaurant || {}; const isCreate = (mode === 'create'); %>

  <form
    action="<%= isCreate ? '/admin/restaurants' : ('/admin/restaurants/' + r._id) %>"
    method="POST"
    class="card form-grid">

    <!-- If you switch to PUT with method-override later, uncomment:
    <% if (!isCreate) { %><input type="hidden" name="_method" value="PUT"><% } %>
    -->

    <div class="form-row">
      <label for="name">Name <span class="required">*</span>
        <input id="name" class="input" name="name" type="text" required value="<%= r.name || '' %>">
      </label>
    </div>

    <div class="form-row form-row--2">
      <label for="cuisine">Cuisine
        <input id="cuisine" class="input" name="cuisine" type="text" value="<%= r.cuisine || '' %>">
      </label>

      <label for="phone">Phone
        <input id="phone" class="input" name="phone" type="text" value="<%= r.phone || '' %>">
      </label>
    </div>

    <div class="form-row">
      <label for="address">Address
        <input id="address" class="input" name="address" type="text" value="<%= r.address || '' %>">
      </label>
    </div>

    <div class="form-row">
      <label for="website">Website
        <input id="website" class="input" name="website" type="url" value="<%= r.website || '' %>">
      </label>
    </div>

    <div class="form-row">
      <label for="description">Description
        <textarea id="description" class="input" name="description" rows="4"><%= r.description || '' %></textarea>
      </label>
      <p class="help-text">Keep it concise; you can edit later.</p>
    </div>

    <div class="row gap-2">
      <button class="btn btn--primary" type="submit"><%= isCreate ? 'Create' : 'Save Changes' %></button>
      <a class="btn btn--ghost" href="/admin/restaurants">Cancel</a>
    </div>
  </form>
</section>

<%- include('../../partials/footer') %>
